<!DOCTYPE html>
  <html class ="page" lang="ru">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>  Yandex test </title>
      <link href="css/normalize.css" rel="stylesheet">
      <link rel ="preload" href="css/app.min.css" as="style">
      <link href="css/app.min.css" rel="stylesheet">
  </head>
  <body class="page__body">
  <div class="racks-wrapper" id="racks-wrapper">
    <svg width="212" height="12" viewBox="0 0 212 12" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M211.37 11.9543H0C0 5.36029 5.36028 0 11.9543 0H199.416C206.01 0 211.37 5.36029 211.37 11.9543Z" fill="#E67E22"/>
    </svg>
    <div class="top-area" id="top-area">
      <div class="flags" id="flags">
        <svg width="212" height="31" viewBox="0 0 212 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13.2093 30.8613C5.91332 30.8613 0 24.948 0 17.652V0.954285H26.4186V17.652C26.4186 24.948 20.5052 30.8613 13.2093 30.8613Z" fill="#F1C40F"/>
          <path d="M39.6279 30.8613C32.3319 30.8613 26.4186 24.948 26.4186 17.652V0.954285H52.8372V17.652C52.8372 24.948 46.9239 30.8613 39.6279 30.8613Z" fill="#C0392B"/>
          <path d="M66.0465 30.8613C58.7505 30.8613 52.8372 24.948 52.8372 17.652V0.954285H79.2558V17.652C79.2558 24.948 73.3424 30.8613 66.0465 30.8613Z" fill="#F1C40F"/>
          <path d="M92.4864 30.8613C85.1904 30.8613 79.277 24.948 79.277 17.652V0.954285H105.696V17.652C105.696 24.948 99.7823 30.8613 92.4864 30.8613Z" fill="#C0392B"/>
          <path d="M118.905 30.8613C111.609 30.8613 105.696 24.948 105.696 17.652V0.954285H132.114V17.652C132.114 24.948 126.201 30.8613 118.905 30.8613Z" fill="#F1C40F"/>
          <path d="M145.324 30.8613C138.028 30.8613 132.114 24.948 132.114 17.652V0.954285H158.533V17.652C158.533 24.948 152.619 30.8613 145.324 30.8613Z" fill="#C0392B"/>
          <path d="M171.742 30.8613C164.446 30.8613 158.533 24.948 158.533 17.652V0.954285H184.951V17.652C184.951 24.948 179.038 30.8613 171.742 30.8613Z" fill="#F1C40F"/>
          <path d="M198.161 30.8613C190.865 30.8613 184.951 24.948 184.951 17.652V0.954285H211.37V17.652C211.37 24.948 205.457 30.8613 198.161 30.8613Z" fill="#C0392B"/>
        </svg>
      </div>
      <div class="flags-shadow" id="flags-shadow">
        <svg width="198" height="31" viewBox="0 0 198 31" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M198.967 0.94931H0.402588V23.1988C2.50842 27.7082 7.06042 30.8563 12.3782
      30.8563C19.6741 30.8563 25.5875 24.943 25.5875 17.6471C25.5875 24.943 31.5008 30.8563
      38.7967 30.8563C46.0927 30.8563 52.006 24.943 52.006 17.6471C52.006 24.943 57.9194 30.8563
      65.2153 30.8563C72.5113 30.8563 78.4246 24.943 78.4246 17.6471C78.4246 24.943 84.338 30.8563
      91.6339 30.8563C98.9299 30.8563 104.843 24.943 104.843 17.6471C104.843 24.943 110.757
      30.8563 118.053 30.8563C125.348 30.8563 131.262 24.943 131.262 17.6471C131.262 24.943
      137.175 30.8563 144.471 30.8563C151.767 30.8563 157.68 24.943 157.68 17.6471C157.68 24.943
      163.594 30.8563 170.89 30.8563C178.186 30.8563 184.099 24.943 184.099 17.6471C184.099 24.943
      190.012 30.8563 197.308 30.8563C197.861 30.8563 198.414 30.8138 198.946
      30.75V0.94931H198.967Z" fill="#1D2A36"/>
        </svg>
      </div>
      <img
        src="img/src/WinePNG.png"
        alt="Wine"
        class="item wine"
        draggable="true"
        width="37px"
        height="124.12px">
      <img
        src="img/src/Milk.svg"
        alt="Milk"
        class="item milk"
        draggable="true"
        width="37px"
        height="90.73px">
      <img
        src="img/src/JarPNG.png"
        alt="Jar"
        class="item jar"
        draggable="true"
        width="46px"
        height="41.34px">
      <img
        src="img/src/CheesePNG.png"
        alt="Cheese"
        class="item cheese"
        draggable="true"
        width="36.2"
        height="34.38px">
    </div>
    <svg class="top-of-rack" width="211" height="11" viewBox="0 0 211 11" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M211 11L204 0.86319H6.40259L0 11" fill="#F39C12"/>
    </svg>
    <div class="top-rack-background" id="top-rack-background">
    </div>
    <div class="rack-shadow" id="rack-shadow">
    </div>
    <div class="middle-area" id="middle-area">
      <img
        src="img/src/Meet4.png"
        alt="Meet"
        class="item meet"
        draggable="true"
        width="49px"
        height="48.76px">
      <img
        src="img/src/ChickenPNG.png"
        alt="Chicken"
        class="item chicken"
        draggable="true"
        width="54.47px"
        height="49.85px">
      <img
        src="img/src/Chips.svg"
        alt="Chips"
        class="item chips"
        draggable="true"
        width="76.17px"
        height="46.98px">
    </div>
    <svg class="top-of-rack" width="211" height="10" viewBox="0 0 211 10" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M211.37 11.0095L204.967 0.86319H6.40259L0 11.0095H211.37Z" fill="#F39C12"/>
    </svg>
    <div class="middle-rack-background" id="middle-rack-background">
    </div>
    <div class="rack-shadow" id="middle-rack-shadow">
    </div>
    <div class="bottom-area" id="bottom-area" draggable="true">
      <img
        src="img/src/PineapplePNG.png"
        alt="Pineapple"
        class="item pineapple"
        draggable="true"
        width="35px"
        height="74.08"
      >
      <img
        src="img/src/Bananas.png"
        alt="Bananas"
        class="item bananas"
        draggable="true"
        width="47px"
        height="47.41px">
      <img
        src="img/src/ApplePNG.png"
        alt="Apple"
        class="item apple"
        draggable="true"
        width="31px"
        height="35.99px">
      <img
        src="img/src/Salad.png"
        alt="Salad"
        class="item salad"
        draggable="true"
        width="61.74px"
        height="50.98px">
    </div>
    <svg class="top-of-rack" width="212" height="21" viewBox="0 0 212 21" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M204.967 0.538055H6.40259L0 20.5328H211.37L204.967 0.538055Z" fill="#E3E7E8"/>
    </svg>
    <div class="bottom-rack" id="bottom-rack">
    </div>
    <div class="foundation" id="foundation">
      <div class="top-of-foundation" id="top-of-foundation">
      </div>
    </div>
    <div class="cart" id="cart">
      <img
        src="img/src/Cart.png"
        class="cart-image"
        alt="Cart"
        draggable="false"
        width="276.08px"
        height="240px"
      >
    </div>
<!--    <button class="buy-button hidden-button" id="buy-button" onclick="onClickHundler()">-->
<!--      Оплатить корзину-->
<!--    </button>-->
    <a href="https://lavka.yandex.ru/" class="buy-button hidden-button" id="buy-button">
      Оплатить корзину
    </a>
  </div>
  </body>
    <script>
      const racksWrapper = document.getElementById('racks-wrapper');
      const cart = document.getElementById('cart');
      const topArea = document.getElementById('top-area');
      const cartRect = cart.getBoundingClientRect();
      const cartItems = document.querySelectorAll('.cart-item');
      const buyButton = document.getElementById('buy-button');
      console.log(cartItems.length)
      const itemCount = cartItems.length;
      let currenItem;

      function onClickHundler (){
        alert("Покупка оплачена!");
        // setTimeout(()=> location.reload(), 1000);
        location.reload();
      }

      racksWrapper.addEventListener('dragstart', (event) => {
        if (event.target.classList.contains('item')) {
          event.dataTransfer.setData('text/plain', event.target.textContent);
          currenItem = event.target;
          console.dir(event.target.textContent)
        }
      });
      // Обработчик для события dragover (обязательно)
      cart.addEventListener('dragover', (event) => {
        event.preventDefault(); // Разрешаем сбрасывание
      });

      // Обработчик для события drop
      cart.addEventListener('drop', (event) => {
        event.preventDefault();
        const cartItems = document.querySelectorAll('.cart-item');
        const itemCount = cartItems.length;
        if (itemCount > 1) {
          buyButton.classList.remove('hidden-button');
          if (itemCount > 2) return
        }
        cart.appendChild(currenItem);
        currenItem.style.top = `${cartRect.height - 50 - currenItem.getBoundingClientRect().height}px`;
        console.log(itemCount);
        currenItem.style.left = `${75 + (itemCount * 40)}px`;
        currenItem.style.zIndex = "0";
        currenItem.classList.add('cart-item');
        currenItem = null;
      });

      // Обработчик для начала перетаскивания

    </script>
</html>
